(function(n,t,i,r){xenMCE==r&&(xenMCE={}),xenMCE.Lib={getTools:function(){return this.Tools},overlay:{create:function(n,t,i){xenMCE.Lib.Tools.loadOverlay(n,t,i)},get:function(){return xenMCE.Lib._get("$overlay")},getParams:function(){return xenMCE.Lib._get("params")},getInputs:function(){return xenMCE.Lib._get("inputs")},getEditor:function(){return xenMCE.Lib._get("editor")},getSelection:function(){return xenMCE.Lib._get("selection")}},_get:function(n){var t=xenMCE.Tools.backupLib;return t[n]!==r?t[n]:!1}},xenMCE.Templates={},tinymce.create("xenMCE.Tools",{Tools:function(t){var i=this,u=this.static;t===r&&(t=tinymce.activeEditor),this.getEditor=function(){return t};t.on("init",function(){n(t.getElement()).data("mce4",!0)});this.$textarea=n(t.getElement()),this.isOldXen=i.getParam("oldXen");t.on("init",function(){var i=t.windowManager,u=i.open;i.open=function(n,i){var e,f;return n===r&&(n=!1),i===r&&(i=!1),f={args:n,params:i},t.fire("XenModalInit",f),e=u(n,i),f={modal:e,args:n,params:i},t.fire("XenModalComplete",f),e}});this.isFullscreen=function(){return t.plugins.fullscreen===r?!1:t.plugins.fullscreen.isFullscreen()},xenMCE.Lib.Tools=this;t.on("XenReady",function(){xenMCE.Plugins.Auto!==r&&n.each(xenMCE.Plugins.Auto,function(n,r){new r(i,t)})})},overlayParams:{},overlayInputs:{},overlayCache:{},loadOverlay:function(t,u,f){var h,p,v,w;if(this.xenOverlayIsloading==!0)return!1;this.xenOverlayIsloading=!0;var e=this,c=this.getEditor(),b=c.dom,l=isLink=isEmail=!1,a=url_href="",o=c.selection,y,s,g=s?0:1,k=xenMCE.Tools.backupLib,d=tinymce.each;if(this.dialog=t,this.findTargetWindow=function(n){var t=c.windowManager.windows,i=!1;return(d(t,function(t){if(t.params!=r&t.params.dialogName==n)return i=t,!1}),!i&&t[0]!==r)?t[0]:i},selElm=o.getNode(),anchorElm=b.getParent(selElm,"a[href]"),anchorElm&&(l=!0,o.select(anchorElm),a=o.getContent({format:"text"}),url_href=anchorElm?b.getAttrib(anchorElm,"href"):"",isEmail=url_href.indexOf("mailto")==0&&url_href.indexOf("@")>0&&url_href.indexOf("//")==-1?!0:!1,isLink=!isEmail),h=c.settings.xen_attach.split(","),this.xenAttach={type:h[0],id:h[1],hash:h[2]},y=o.getContent(),s=o.getContent({format:"text"}),k.selection={sel:o,text:s,html:y,isUrl:l,isLink:isLink,isEmail:isEmail,url:{text:a,href:url_href,anchorElm:anchorElm}},p=this.findTargetWindow(t),p)return p.show(),this.xenOverlayIsloading=!1,!1;typeof u!="object"&&(u={}),this.overlayParams={dialog:t,src:e.isDefined(f,"src"),onbeforeload:e.isDefined(f,"onbeforeload"),onafterload:e.isDefined(f,"onafterload"),onsubmit:e.isDefined(f,"onsubmit"),onclose:e.isDefined(f,"onclose"),wmConfig:u},v={dialog:t,selectedHtml:y,selectedText:s,isUrl:l,isLink:isLink,isEmail:isEmail,urlDatas:{text:a,href:url_href},attach:this.xenAttach},w=n(i).find("#mce4_cache_"+t),e.overlayCache[t]!==r&&w.length?e._overlayFormatter(w.html(),!1,!0,v):XenForo.ajax("index.php?editor/quattro-dialog",v,n.proxy(this,"_overlayLoader"))},_overlayLoader:function(t){if(XenForo.hasResponseError(t)||typeof t.templateHtml!="string"){this.xenOverlayIsloading=!1;return}for(var u=this,r='<div><div class="mce-xen-body">'+t.templateHtml+"</div></div>",f=/<script[^>]*>([\s\S]*?)<\/script>/ig,e,o=[];e=f.exec(r);)o.push(e[1]);r=r.replace(f,""),u.overlayCache[u.dialog]=this.xenAttach.hash,$cache=n('<div id="mce4_cache_'+u.dialog+'">'+r+"</div>").hide(),n(i).find("body").append($cache),new XenForo.ExtLoader(t,function(){u._overlayFormatter(r,o)})},_overlayFormatter:function(t,i,u,f){function y(t){return $inputs=t.find(g.toString()),$inputs.length>0&&$inputs.each(function(){var i=n(this).attr("name");i&&(a[i]=n(this).val())}),t.find("*").filter(function(){n(this).data("value")&&(a[n(this).attr("name")]={html:n(this).html(),text:n(this).text(),data:n(this).data("value")}),parseInt(n(this).data("hide"))==1&&n(this).hide()}),e.overlayInputs=a,d.inputs=a,a}var e=this,l=this.getEditor(),s=this.overlayParams,o=s.wmConfig,ut=l.windowManager,a={},tt=e.ucfirst(e.dialog),nt=e.getPhrase("insert"),rt=e.getPhrase("cancel"),g=e.getInputTags(),d=xenMCE.Tools.backupLib,b,k,it,v,c,w;d.params=s,d.editor=l,$html=n(t),$title=$html.find(".mceTitle").remove(),$Submit=$html.find(".mceSubmit").remove(),$Cancel=$html.find(".mceCancel").remove(),$Submit.length==1&&(nt=e.getTagName($Submit,!0)),$Cancel.length==1&&(rt=e.getTagName($Cancel,!0)),y($html),$title&&(o.title=$title.text()),o.title!==r&&o.title||(o.title=e.getPhrase("notitle")),b=e.getParam("overlayDefaultSize"),o.width===r&&(o.width=b.w),o.height===r&&(o.height=b.h),$title.data("width")!==r&&(o.width=parseInt($title.data("width"))),$title.data("height")!==r&&(o.height=parseInt($title.data("height"))),o.data!==r?(n.each(o.data,function(t,i){$e=$html.find("[name="+t+"]"),$e.length==1&&(e.getTagName($e,g)?n('<span class="tmp-data-mce">'+i+"</span>").insertAfter($e).hide():$e.html(i))}),n.extend(o.data,a)):o.data=a,o.onsubmit!==r&&(originalSubmit=o.onsubmit,o.onsubmit=function(t){var r=e.findTargetWindow(e.dialog),i=n(r.getEl()),u=y(i);n.extend(t.data,u),originalSubmit(t,i,l,e)}),o.buttons===r&&(o.buttons=[{text:nt,subtype:"primary xenSubmit",minWidth:80,onclick:function(t){var i=e.findTargetWindow(e.dialog),u=n(i.getEl()),f;s.onsubmit!=!1&&(f=y(u),n.extend(t.data,f),s.src[s.onsubmit](t,u,l,e)),i.find("form")[0]!==r?i.find("form")[0].submit():i.submit(),s.onclose!=!1&&(f=y(u),n.extend(t.data,f),s.src[s.onclose](t,u,l,e)),i.close()}},{text:rt,subtype:"xenCancel",onclick:function(t){var i=n(p.getEl()),r;s.onclose!=!1&&(r=y(i),n.extend(t.data,r),s.src[s.onclose](t,i,l,e)),p.close()}}]),o.html=$html.html(),s.onbeforeload!=!1&&(k=s.src[s.onbeforeload](o,e),k!==r&&(o=k));var ft=ut.open(o,{dialogName:s.dialog,modalClassName:s.dialog,ovlParams:s}),p=e.findTargetWindow(e.dialog,!0),h=n(p.getEl());if(xenMCE.Tools.backupLib.$overlay=h,i.length&&i!==r)for(v=0;v<i.length;v++)n.globalEval(i[v]);if(it=h.find(".mce-container-body").height(),h.find(".mceFocus").focus(),h.find(".tmp-data-mce").each(function(){$e=n(this),$e.prev().val($e.html()),$e.remove()}),$tabs=h.find(".mceTabs").addClass("mce-tabs"),$tabs=e.cleanWhiteSpace($tabs),$panes=$tabs.next(".mcePanes").children().addClass("mce-pane"),$tabs.length>0&&$panes.length>0&&($tabs.children().addClass("mce-tab"),v=$tabs.find(".mceActive").index(),$tabs.tabs($panes,{current:"mce-active",initialIndex:v>=0?v:0})),c="mceSlides",$slides=h.find("."+c),$slides.length>0&&(w=it,$slides.height(w).children().height(w-$slides.data("diff")),$slider_tabs=h.find("."+c+"Tabs"),n('<a class="'+c+"Navig "+c+'Backward">&lsaquo;</a><a class="'+c+"Navig "+c+'Forward">&rsaquo;</a>').insertBefore($slides),h.find("."+c+"Navig").css("top",w/2-10+"px"),$slider_tabs.tabs($slides.children(),{effect:"fade",fadeOutSpeed:"fast",rotate:!0}).slideshow({prev:"."+c+"Backward",next:"."+c+"Forward",clickable:!1})),$multi=h.find("textarea, .mce-multiline"),$multi&&(p.off("keydown"),$multi.attr("spellcheck","false").attr("hidefocus","true")),$checkBox=h.find(".xenCheckBox"),$checkBox.length>0&&($checkBox.each(function(){var r=n(this).data("phrase")||"",u=n(this).data("inputname"),i=n(this).data("checked")=="checked"?1:0,f='<i class="mce-ico mce-i-checkbox"></i><span>'+r+'</span><input name="'+u+'" type="hidden" value="'+i+'" />';i&&n(this).addClass("mce-checked"),n(f).prependTo(n(this))}),e._initCheckBox($checkBox)),h.xfActivate(),$title.hasClass("FastReload")){if(u&&(f.isUrl||e._inlineLink(f),e._onFastReload(h,f),e.isDefined(xenMCE.Templates[tt],"onfastreload")))xenMCE.Templates[tt].onfastreload(h,f,l,e)}else delete e.overlayCache[e.dialog];s.onafterload!=!1&&s.src[s.onafterload](h,a,l,e),e.xenOverlayIsloading=!1},_onFastReload:function(t,i){var e=this,u=e.getInputTags(),f,r;u.push("textarea"),n.each(u,function(n,i){t.find(i+".MceReset").val("")}),i.isUrl?(f=i.urlDatas,i.isLink?r="input.MceLink":i.isEmail&&(r="input.MceEmail"),t.find(r).val(f.href),t.find(r+"Text").val(f.text)):n.each(u,function(n,r){t.find(r+".MceSelec").val(i.selectedText),t.find(r+".MceSelecHtml").val(i.selectedHtml)})},_inlineLink:function(n){var r=this,u=r.getUrlRegex(),f=r.getMailRegex(),t=n.selectedText,i;t.length&&(i=function(){n.isUrl=!0,n.urlDatas.text=n.urlDatas.href=t},u.test(t)&&(n.isLink=!0,i()),f.test(t)&&(n.isEmail=!0,i()))},_initCheckBox:function(t){t.children("i").unbind("click").bind("click",function(){$parent=n(this).parent(),$input=n(this).siblings("input");var r=parseInt($input.val()),i="mce-checked";r?($parent.removeClass(i),$input.val(0)):($parent.addClass(i),$input.val(1))})},responsiveModal:function(t){function f(){var f=(n(window).width()-i.width())/2,e=i.find(".mce-xen-body"),h=e.css("overscroll"),a=i.find("mce-foot");if(f<0){f=1,t.addClass(r),i.children().add(e).addClass(r);var o=n(window).width(),s=o-5,c=i.find("*").filter(function(){function i(t){return t.indexOf("%")!=-1?!1:parseInt(t)>=o?(n(this).data("owidth")||n(this).data("owidth",t),!0):void 0}var r=n(this).prop("style").width,u=n(this).css("width"),t;return(t=i(r),t==!0)?!0:(t=i(u),n(this).css("width")==n(this).parent().css("width"))?!1:t==!0?!0:!1}),l=i.find("*").filter(function(){var t=n(this).css("white-space");return t!="normal"&&!n(this).data("onw")?(n(this).data("onw",t),!0):!1});c.add(i).css({"max-width":s+"px"}),i.find(".responsiveBlock").css({"max-width":s-15+"px"}),i.find(".mainBodyOverflow").length&&u.css("overflow","auto"),i.find(".disableXenBodyOverflow").length==0&&e.data("ovsc",h).css("overflow","auto"),l.css({"white-space":"normal"})}i.css({left:f})}var i=n(t.getEl()),r="responsive",u=i.children(".mce-container-body");f()},isDefined:function(n,t){return t===r?n===r?!1:n:n===r||n[t]===r?!1:n[t]},getTagName:function(t,i,u){var s=this,f=t.get(0).tagName.toLowerCase(),o,e;return u===r&&i===r?f:(i!==r&&typeof i!="boolean"&&(u=i),i===!0)?(o=s.getInputTags(),n.inArray(f,o)!==-1?t.val():t.text()):typeof u=="object"?(e=[],n.each(u,function(n,t){e.push(t.toLowerCase())}),n.inArray(f,e)!=-1?!0:!1):f==u.toLowerCase()?!0:!1},cleanWhiteSpace:function(n){return n.contents().filter(function(){return this.nodeType==3&&!/\S/.test(this.nodeValue)}).remove(),n},isActiveButton:function(n,t){for(var u=this.getEditor(),e=tinymce.each,i=[],t=t==!0,f=1;u.settings["toolbar"+f]!==r;f++)i=i.concat(u.settings["toolbar"+f].split(" "));return(t||u.settings.menubar==!1||u.settings.menu==r||e(u.settings.menu,function(n,t){n.items!=r&&(i=i.concat(n.items.split(" "))),i.push(t)}),tinymce.inArray(i,n)==-1)?!1:!0},getButtonByName:function(n,t){var u=this.getEditor(),f=u.buttons,s=u.theme.panel.find("toolbar *");if(f[n]===r)return!1;var e=f[n],i=!1,o=0;return tinymce.each(e,function(){o++}),tinymce.each(s,function(n){if(n.type=="button"&&n.settings!==r){var f=0;if(tinymce.each(n.settings,function(n,t){e[t]==n&&f++}),f==o)return i=n,t!=!1&&(i=n.getEl()),!1}}),i},getPathEl:function(t){var f=this.getEditor(),e=f.theme.panel&&f.theme.panel.find("#statusbar")[0],i,u;return e&&(i=e.find(".path"),i[0]!==r)?(u=i[0].getEl(),t==!0?n(u):u):!1},getButtonsByProperty:function(t,i,u){var h=this.getEditor(),c=h.theme.panel.find("toolbar *"),f={},e;if(tinymce.each(c,function(u,e){var o=u.settings;n.inArray(u.type,["button","splitbutton"])!==-1&&o!==r&&(i!==r&&o[t]!==r&&o[t]==i?f[e]=u:(i===r||i===null)&&o[t]!==r&&(f[e]=u))}),u!==r&&(e=n(),n.each(f,function(t,i){e=e.add(n(i.getEl()))}),f=e),typeof u=="object"&&u instanceof jQuery){var l=u,o=[],s="_tmp_";n.each(f,function(t,i){o.push("#"+n(i).attr("id"))}),o=o.toString(),f=l.find(o).addClass(s).find(">:first-child").parents("."+s).removeClass(s)}return f},getMenubar:function(){var i=this.getEditor(),t=i.theme.panel.find("menubar");return t[0]!==r?n(t[0].getEl()):n()},getToolbars:function(n){var u=this.getEditor(),t=u.theme.panel.find("toolbar"),f=t.parent(),i=parseInt(this.getParam("tglMenuMode"));return i||n!==r?t.slice(i):f},addIconClass:function(n,t){return n.find("i.mce-ico").addClass("mce-"+t+"-icons")},buildMenuItems:function(n,t,i,u){var e=[],o=[],f,s;return t===r&&(t=n),tinymce.each(t.split(/\|/),function(n){o.push(n)}),tinymce.each(n.split(/\|/),function(n,t){if(f=o[t]!==r?o[t]:"",i===r||i==null)return e.push({text:n,value:f});var s={title:n,text:n,value:f,textStyle:i.replace(/{t}/g,n).replace(/{v}/g,f)};u!==r&&(s.classes=u),e.push(s)}),e},createListBoxChangeHandler:function(n,t,i){var r=this.getEditor();return function(u){var f=this;typeof i=="function"&&i(f,u);r.on("nodeChange",function(i){if(!f.nodeChangeOff){var e=r.formatter,u=null;tinymce.each(i.parents,function(i){return tinymce.each(n,function(n){return t?e.matchNode(i,t,{value:n.value})&&(u=n.value):e.matchNode(i,n.value)&&(u=n.value),u?!1:void 0}),u?!1:void 0}),f.value(u),f.resetText&&f.text(!1)}})}},fixBtnFullscreen:function(t,i,u){var s=this;if(!s.isFullscreen())return!1;var f=n(t.getEl()),o=u===r?n(t[i].getEl()):n(u.getEl()),e=f.offset(),h=f.position();e.top=s.isFullscreen()?h.top+f.height()+parseInt(o.css("marginTop")):e.top+f.height()+parseInt(o.css("marginTop")),o.offset(e)},handleDisabledState:function(n,t){function u(){n.disabled(!f.getParent(r.getStart(),t)),r.selectorChanged(t,function(t){n.disabled(!t)})}var i=this.getEditor(),f=i.dom,r=i.selection;if(i.initialized)u();else i.on("init",u)},insertBbCode:function(n,t,i){n=n.replace(/^at_/,"");var r=this.getEditor(),e=r.dom,u="MceCaretBb",s,f="["+n,o="[/"+n+"]";i||(i=r.selection.getContent()),i+='<span id="'+u+'"></span>',f+=t?"="+t+"]":"]",r.execCommand("mceInsertContent",!1,f+i+o),r.selection.select(e.get(u)),e.remove(u)},getParam:function(n){var i=this.getEditor(),t=i.getParam("xenParams");return this.isDefined(t,n)?t[n]:null},getPhrase:function(n,t){var i=xenMCE.Phrases;if(i[n]===r)return"";if(t!==r){if(i[n][t]!==r)return i[n][t]}else return i[n];return""},getInputTags:function(){return["input","textarea","select"]},ucfirst:function(n){return n.charAt(0).toUpperCase()+n.slice(1)},unescapeHtml:function(n,t){n=n.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'"),t=="noBlank"&&(n=n.replace(/	/g,"\t").replace(/&nbsp;/g,"  ").replace(/<\/p>\n<p>/g,"\n"));var i=new RegExp("^<p>([\\s\\S]+)</p>$","i");return i.test(n)&&(n=n.match(i),n=n[1]),n},escapeHtml:function(n,t){return t!=="onlyBlank"&&(n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")),t!=="noBlank"&&(n=n.replace(/\t/g,"\t").replace(/ /g,"&nbsp;").replace(/\n/g,"</p>\n<p>")),n},stripTags:function(n){return n.replace(/<[^>]+>/ig,"")},getUrlRegex:function(){return new RegExp("^(?:s+)?(?:(?:https?|ftp|file)://|www.|ftp.)[-a-zA-Z0-9+&@#/%=~_|$?!:,.]*[-a-zA-Z0-9+&@#/%=~_|$](?:s+)?$","i")},getMailRegex:function(){return new RegExp("^(?:s+)?[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}(?:s+)?$","i")},getSelection:function(){return xenMCE.Lib._get("selection")},zen2han:function(n){for(var t,r="",i=0,u=n.length;i<u;i++)t=n.charCodeAt(i),t=t>=65281&&t<=65392?t-65248:t,t=t===12540?45:t,r=r+String.fromCharCode(t);return r},static:{backupLib:{}}}),tinymce.PluginManager.add("xenforo",xenMCE.Tools),tinymce.PluginManager.add("xenReady",function(n){n.fire("XenReady")});var u="xenMCE.Plugins.Auto";tinymce.create(u+".BbmButtons",{BbmButtons:function(t,i){n.extend(this,t),this.ed=i;var u=this,f=u.getParam("bbmButtons");n.each(f,function(f,e){var o=e.code,s;if(config={name:o,tooltip:e.desc},e.type=="manual"?(config.icon=o,e.typeOpt&&(config.classes=e.typeOpt)):e.type=="text"?(config.icon=!1,config.text=e.typeOpt):(config.icon=o,config.iconset=e.iconSet),e._return=="direct"?config.onclick=function(){u.insertBbCode(f,e.tagOpt,e.tagCont)}:e._return!="kill"&&(config.onclick=function(){var t,i;u.bbm_tag=f,u.bbm_separator=e.separator,t={onsubmit:u.submit},i={src:u,onafterload:"onafterload",onclose:"onclose"},u.loadOverlay("bbm_"+e.template,t,i)}),s=function(t){u.ed.addButton(o,t);var i=n.extend({},t);i.text==r&&(i.text=e.desc,i.tooltip=!1,i.context="insert"),u.ed.addMenuItem(o,i)},e._return=="kill"){if(!t.isActiveButton(e.code)){console.debug('Button "'+e.code+'" not found - Delete it from BBM');return}i.buttons[e.code]===r?n.extend(i.buttons[e.code],config):n.extend(i.buttons[e.code],config)}else s(config)}),u.isActiveButton("code",!0)&&(u.ed.buttons.code.xenfright=!0)},onafterload:function(n,t,i,u){var f=u.overlayParams.dialog.replace("bbm_","Bbm_");if(xenMCE.Templates[f]!==r&&xenMCE.Templates[f].onafterload!==r)xenMCE.Templates[f].onafterload(n,t,i,u)},onclose:function(n,t,i,u){var f=u.overlayParams.dialog.replace("bbm_","Bbm_");if(xenMCE.Templates[f]!==r&&xenMCE.Templates[f].onclose!==r)xenMCE.Templates[f].onclose(n,t,i,u)},submit:function(n,t,i,u){var f=u.overlayParams.dialog.replace("bbm_","Bbm_");xenMCE.Templates[f]!==r&&xenMCE.Templates[f].submit!==r&&xenMCE.Templates[f].submit(n,t,i,u)}}),tinymce.create(u+".XenSwitch",{XenSwitch:function(t,i){n.extend(this,t);var r="xen_switch",u;this.ed=i,u={name:r,icon:r,iconset:"xenforo",xenfright:!0,tooltip:this.getPhrase("switch_text",0),onclick:n.proxy(this,"wysiwygToBbCode")},i.addButton(r,u),i.addMenuItem(r,n.extend({},u,{text:"Bb Code editor",tooltip:!1}))},wysiwygToBbCode:function(){var i,r,u;this.isFullscreen()==!0&&(i=this.getButtonByName("fullscreen"),i!=!1&&n(i).trigger("click")),r={content:this.ed.getContent()},this.ed.fire("XenSwitchToBbCode",r),u=r.content,XenForo.ajax("index.php?editor/to-bb-code",{html:u},n.proxy(this,"wysiwygToBbCodeSuccess"))},wysiwygToBbCodeSuccess:function(t){var e;if(!XenForo.hasResponseError(t)&&t.bbCode!==r){t.isConnected===r||t.isConnected||this.ed.windowManager.alert(t.notConnectedMessage);var o=n(this.ed.getContainer()),u=n(this.ed.getElement()),i=n('<div class="bbCodeEditorContainer" />'),f=n('<textarea class="textCtrl Elastic" rows="5" />');u.attr("disabled")||(e=u.attr("name").replace(/_html(]|$)/,""),f.attr("id",e).attr("name",e).val(t.bbCode).appendTo(i),n("<a />").attr("href","javascript:").text(this.getPhrase("switch_text",1)).click(n.proxy(this,"bbCodeToWysiwyg")).appendTo(n("<div />").appendTo(i)),u.attr("disabled",!0),o.after(i).hide(),i.xfActivate(),f.focus(),this.$bbCodeTextContainer=i,this.$bbCodeTextArea=f)}},bbCodeToWysiwyg:function(){XenForo.ajax("index.php?editor/to-html",{bbCode:this.$bbCodeTextArea.val()},n.proxy(this,"bbCodeToWysiwygSuccess"))},bbCodeToWysiwygSuccess:function(t){var f,i,u,e;XenForo.hasResponseError(t)||t.html==r||(t.isConnected===r||t.isConnected||this.ed.windowManager.alert(t.notConnectedMessage),f=n(this.ed.getContainer()),i=n(this.ed.getElement()),i.attr("disabled"))&&(i.attr("disabled",!1),f.show(),u={content:t.html},this.ed.fire("XenSwitchToWysiwyg",u),e=u.content,this.ed.setContent(e),this.ed.focus(),this.$bbCodeTextContainer.remove())}}),tinymce.create(u+".XenFonts",{XenFonts:function(i,u){for(var it=tinymce.ui.Factory,l,e,k="font-size",a="xen-"+k,s="fontsize",v="font-family",y="xen-"+v,tt="fontfamily",d="mce-xenforo-icons",h="",g=i.getParam("smallFontBtn"),p,o,c=i.isOldXen===!0?"xx-small|x-small|small|medium|large|x-large|xx-large":"9px|10px|12px|15px|18px|22px|26px",f=1;f<8;f++)h+=i.getPhrase("size")+" "+f,f!=7&&(h+="|");l=i.buildMenuItems(h,c,"font-size:{v}",a);var w=function(i){var f=function(){var o=n(u.getContainer()),e="fixed-width",r=!1,f=function(){var t=o.width();if(t<450||g)i.resetText=!0,i.text(!1),r||(i.icon(i._name+" "+d),i.removeClass(e),r=!0);else if(t>=450&&r){function u(){var t=i._value,r=i.settings.text;return t!=null&&n.each(i._values,function(n,i){if(i.value==t)return r=i.text,!1}),r}i.resetText=!1,i.text(u()),i.icon(!1),i.addClass(e),r=!1}};f();i.on("click",f);n(t).resize(f)};u.on("postrender",f)},b=function(t){var u=t.menu,i,r;u&&(i=n(u.getEl()).children().first(),r=i.find('[aria-pressed="true"]'),r.length?i.scrollTop(i.scrollTop()+r.position().top):i.scrollTop(0))},nt={name:"xen_"+s,type:"listbox",icon:!1,fixedWidth:!0,text:i.getPhrase("font_size"),values:l,onPostRender:i.createListBoxChangeHandler(l,s,w),onShow:function(n){n.control.addClass(a+"-menu"),n.control.initLayoutRect(),i.fixBtnFullscreen(this,"menu"),b(this)},onclick:function(n){n.control.settings.value&&u.execCommand("FontSize",!1,n.control.settings.value)}};u.addButton("xen_"+s,nt),e=i.buildMenuItems("Andale Mono|Arial|Arial Black|Book Antiqua|Courier New|Georgia|Helvetica|Impact|Tahoma|Times New Roman|Trebuchet MS|Verdana","andale mono,times|arial,helvetica,sans-serif|arial black,avant garde|book antiqua,palatino|courier new,courier|georgia,palatino|helvetica|impact,chicago|tahoma,arial,helvetica,sans-serif|times new roman,times|trebuchet ms,geneva|verdana,geneva",v+":{v}",y),p={name:"xen_"+tt,type:"listbox",icon:!1,fixedWidth:!0,text:i.getPhrase("font_family"),values:e,onPostRender:i.createListBoxChangeHandler(e,"fontname",w),onShow:function(n){n.control.addClass(y+"-menu"),n.control.initLayoutRect(),i.fixBtnFullscreen(this,"menu"),b(this)},onclick:function(n){n.control.settings.value&&u.execCommand("FontName",!1,n.control.settings.value)}},u.addButton("xen_fontfamily",p),o={},n.each(e,function(n,t){o[t.title.toLowerCase()]=t.value});u.on("preInit",function(){u.on("PreProcess SetContent",function(n){var t=u.dom;tinymce.each(t.select("span",n.node),function(n){var i=n.style.fontFamily;i&&(i=i.toLowerCase().replace(/'/g,""),i!=="serif"&&o[i]!==r&&t.setStyle(n,"fontFamily",o[i]))})})})}}),tinymce.create(u+".Fright",{Fright:function(t,i){if(t.getParam("frightMode")!=!0)return!1;n.extend(this,t);var r=this,u="mce-top-right-body";i.on("postrender",function(t){function e(){var t="mce-first",i="mce-last";f.each(function(){n(this).removeClass(t).removeClass(i)}).first().addClass(t).end().last().addClass(i).end()}var s=n(t.target.contentAreaContainer).prev(),f=r.getButtonsByProperty("xenfright",null,s),c=s.find(".mce-toolbar").first(),o,h;if(!f.length||(i.addCommand("resetFright",e),!f.length>0))return!1;f.click(function(){setTimeout(function(){e()},0)}),e(),o=n('<div id="mce-top-right" class="mce-container mce-flow-layout-item mce-btn-group" role="toolbar" />'),h=n('<div id="'+u+'" />').append(f),h.prependTo(o),o.prependTo(c);i.on("FullscreenStateChanged",function(){e()})})}}),tinymce.create(u+".Modal",{Modal:function(t,i){i.on("XenModalComplete",function(i){function l(){h.children(".mce-container-body").addClass("mainBodyOverflow")}var s=i.modal,u=i.args,f=i.params,h=n(s.getEl()),e=!1,o=h.find(".noResponsive").length?!0:!1,c="mce-charmap";h.find("."+c).length>=1&&(e="modal-"+c,l()),f&&f.disableResponsive!==r&&(o=f.disableResponsive),u&&u.disableResponsive!==r&&(o=u.disableResponsive),(t.isOldXen===!0||t.getParam("disableResponsive"))&&(o=!0),o||t.responsiveModal(s),u&&u.modalClassName!==r&&(e=u.modalClassName),f&&f.modalClassName!==r&&(e=f.modalClassName),e&&s.addClass(e)})}}),tinymce.create(u+".quirks",{quirks:function(t,i){var u="InlineMessageEditor",r;i.on("postrender",function(t){$container=n(i.getContainer()),$container.parents("form").hasClass(u)&&tinyMCE.activeEditor.execCommand("mceAutoResize",!1,t)});i.on("BeforeSetContent",function(r){function f(n){var t=/^(?:[\s]+)?<img[^>]*?\/>(?:[\s]+)?$/;return t.test(n)}function e(n){var t=/(class="[^"]+?(?="))/;return n=t.test(n)?n.replace(t,"$1 "+u):n.replace(/(<img)/,'$1 class="'+u+'" ')}if(t.getParam("extendInsert")){var u="tmp_"+(+new Date).toString(16);f(r.content)&&(r.content=e(r.content));i.on("ExecCommand",function(t){var l=t.command,c,e;if(l=="mceInsertContent"){var o=i.selection.getBookmark(),r=n(i.getBody()),s=r.find("#"+o.id+"_start"),a=s.offset().top,h=r.parent().add(r);if(i.selection.moveToBookmark(o),s.length)if(c=t.value,e={skip_focus:!0},f(c))r.find("img."+u).one("load",function(t){i.execCommand("mceAutoResize",!1,t,e);var r=n(this),f=r.offset(),o=f.top+r.height();r.removeClass(u),h.scrollTop(o)});else h.scrollTop(a),i.execCommand("mceAutoResize",!1,t,e)}})}});if(!t.isOldXen)return!1;i.on("postrender",function(){var r=i.getDoc();if($form=n(i.getContainer()).parents("form"),!tinymce.isIE&&$form.hasClass(u))try{i.settings.readonly||(r.designMode="On")}catch(f){}});t.getParam("geckoFullfix")&&(r=XenForo._overlayConfig.onBeforeLoad,XenForo._overlayConfig.onBeforeLoad=function(t){if(window.tinyMCE&&tinymce.isGecko&&n(this.getTrigger()).hasClass("edit")&&($mceTextarea=n(tinyMCE.activeEditor.getElement()),!$mceTextarea.attr("disabled"))){var i=$mceTextarea.attr("id");tinyMCE.execCommand("mceRemoveEditor",!1,i),tinyMCE.execCommand("mceAddEditor",!0,i),tinyMCE.activeEditor.focus()}typeof r=="function"&&r(t)})}}),tinymce.create(u+".TableIntegration",{TableIntegration:function(t,i){function s(t){var f=t.control.settings.skin,e=i.dom,u;(u=i.dom.getParent(i.selection.getStart(),"table"),u!=r)&&($tableElm=n(u),$tableElm.attr("data-skin","skin"+f))}function h(t){var e=i.dom,f,u;if((f=i.dom.getParent(i.selection.getStart(),"table"),$skins=n(t.control.getEl()).find(".mce-text"),$skins.css("font-weight","normal"),f!=r)&&($tableElm=n(f),u=$tableElm.attr("data-skin"),u!=r)){if(u=parseInt(u.replace("skin","")),isNaN(u)||u>4)return!1;$skins.eq(u-1).css("font-weight","bold")}}var o,e,f,u;for(this.ed=i,o=this,e=function(){t.handleDisabledState(this,"table")},f=[],u=1;u<5;u++)f.push({text:"Skin "+u,skin:u,onclick:function(n){s(n)},onPostRender:e});i.addMenuItem("xen_tableskin",{name:"xen_tableskin",text:"Table skins",context:"table",onShow:h,menu:f})}}),tinymce.create(u+".Fullscreen",{Fullscreen:function(t,i){if(!t.isActiveButton("fullscreen"))return!1;if(tinymce.isIE&&tinymce.Env.ie<=7)return delete i.buttons.fullscreen,!1;var r=i.buttons.fullscreen;r.xenfright=!0;i.on("submit",function(){t.isFullscreen()&&i.execCommand("mceFullScreen")});i.on("FullscreenStateChanged",function(t){$container=n(i.getContainer()),n(t.target.contentDocument).find("html").css("overflow","auto"),t.state==!1&&(n("html, body").animate({scrollTop:$container.offset().top},300),i.focus())})}}),tinymce.create(u+".XenLink",{XenLink:function(t,i){var f,r,e,u,o;n.extend(this,t),this.ed=i,f=this,r={name:"xen_link",icon:"link",shortcut:"Ctrl+K",stateSelector:"a[href]",onclick:n.proxy(this,"init")},e={type:"splitbutton",menu:f.buildMenuItems(t.getPhrase("unlink")),onshow:function(){n(".mce-tooltip:visible").hide()},onselect:function(){i.execCommand("unlink")}},o=t.getParam("fastUnlink"),o&&n.extend(r,e),u={name:"xen_unlink",icon:"unlink",cmd:"unlink",stateSelector:"a[href]"},i.addButton("xen_link",r),i.addMenuItem("xen_link",n.extend({},r,{type:"menuitem",text:"Link",context:"insert",prependToContext:!0})),i.addButton("xen_unlink",u),i.addMenuItem("xen_unlink",n.extend({},u,{text:"Unlink",tooltip:!1}))},init:function(){var t=this.getParam("overlayLinkSize");config={width:t.w,height:t.h,onsubmit:this.submit},this.loadOverlay("link",config)},submit:function(n,t,i,r){xenMCE.Templates.Link.submit(n,t,i,r)}}),tinymce.create(u+".XenMedia",{XenMedia:function(t,i){n.extend(this,t),this.ed=i;var u=this,r;r={name:"xen_media",icon:"media",onclick:n.proxy(this,"init")},i.addButton("xen_media",r),i.addMenuItem("xen_media",n.extend({},r,{text:t.getPhrase("xen_media_desc"),context:"insert",tooltip:!1}))},init:function(){var t=this.getParam("overlayMediaSize");config={width:t.w,height:t.h,onsubmit:this.submit},this.loadOverlay("media",config)},submit:function(n,t,i,r){xenMCE.Templates.Media.submit(n,t,i,r)}}),tinymce.create(u+".XenImage",{XenImage:function(t,i){n.extend(this,t),this.ed=i;var u=this,r;r={name:"xen_image",icon:"image",stateSelector:"img:not([data-mce-object],[data-smilie])",onclick:n.proxy(this,"init")},i.addButton("xen_image",r),i.addMenuItem("xen_image",n.extend({},r,{text:"Image",context:"insert",tooltip:!1}))},init:function(){var t=this.ed.selection.getNode(),i=this.getParam("overlayImageSize");config={width:i.w,height:i.h,onsubmit:this.submit},t.nodeName=="IMG"&&(config.data={url:this.ed.dom.getAttrib(t,"src")}),this.loadOverlay("image",config)},submit:function(n,t,i,r){xenMCE.Templates.Image.submit(n,t,i,r)}}),tinymce.create(u+".XenCode",{XenCode:function(t,i){n.extend(this,t);var f=this,r="xen_code",u;this.ed=i,u={name:r,icon:r,iconset:"xenforo",onclick:n.proxy(this,"init")},i.addButton(r,u),i.addMenuItem(r,n.extend({},u,{text:t.getPhrase("xen_code_desc"),context:"insert",tooltip:!1}))},init:function(){config={width:480,height:300,onsubmit:this.submit},this.loadOverlay("code",config)},submit:function(n,t,i,r){xenMCE.Templates.Code.submit(n,t,i,r)}}),tinymce.create(u+".XenQuote",{XenQuote:function(t,i){var u="xen_quote",f;f={name:u,icon:u,iconset:"xenforo",onclick:function(){t.insertBbCode("quote",!1)}},i.buttons[u]===r&&(i.addButton(u,f),i.addMenuItem(u,n.extend({},f,{text:t.getPhrase("xen_quote_desc"),context:"insert",tooltip:!1})))}}),tinymce.create(u+".XenSmilies",{XenSmilies:function(t,i){function c(n){function s(n,i){return tinymce.each(i,function(i,r){var u={id:i[1],desc:i[0],bbcode:l.encode(r)},o=t.getParam("smiliesDesc");if(o=="bbcode"?u.desc=r:o=="none"&&(u.desc=""),f!=0&&a>f)return!1;n+=typeof u.id=="number"?'<a href="#"><img src="styles/default/xenforo/clear.png" alt="'+u.bbcode+'" title="'+u.desc+'" '+c+' class="'+e+" "+e+"Sprite mceSmilie"+u.id+'"  /></a>':'<a href="#"><img src="'+l.encode(u.id)+'" alt="'+u.bbcode+'" title="'+u.desc+'" '+c+' class="'+e+'" /></a>',a++}),n}var l=i.dom||tinymce.DOM,a=1,f,e="mceQuattroSmilie",v="",o=t.getParam("xenforo_smilies"),y=t.getParam("smiliesCat"),h=t.getParam("xCatSmilies"),u,c;return n===!0?(f=0,v="Full"):f=t.getParam("xSmilies"),u='<div role="presentation" class="'+e+"Block"+v+' responsiveBlock">',c='data-smilie="yes"',y?n!==!0&&h!=-1&&o[h]!==r?u+=s("",o[h].smilies):tinymce.each(o,function(i){var f=i.title?i.title:t.getPhrase("uncat_smilies");n===!0?(u+='<p class="mce_smilie_cat_title">'+f+"</p>",u+='<div class="mce_smilie_cat">'+s("",i.smilies)+"</div>"):u+=s("",i.smilies)}):u=s(u,o),u+="</div>"}function l(){return c()}function a(){var t=c(!0),r={type:"container",html:t,onclick:function(t){var r,u;t.preventDefault(),r=i.dom.getParent(t.target,"a"),r&&(u=n(r).html(),i.execCommand("mceInsertContent",!1,u))}},u=i.windowManager.open({title:"Smilies picker",spacing:10,padding:10,items:[r],buttons:[{text:"Close",onclick:function(){u.close()}}]},{modalClassName:"modal-smilies"})}var o;n.extend(this,t);var s=this,e="xen_smilies",f="xen_smilies_picker",h=t.getParam("smiliesWindow"),p=t.getParam("showSmilieItemWin");var v={autohide:!0,html:l,onclick:function(t){var u=i.dom.getParent(t.target,"a"),f;u&&(f=n(u).html(),i.execCommand("mceInsertContent",!1,f),t.dontHide!=r&&t.dontHide||this.hide())}},y={name:e,icon:"emoticons",type:"panelbutton",stateSelector:"img[data-smilie]",popoverAlign:"bc-tl",panel:v},u={name:f,icon:f,iconset:"xenforo",tooltip:"Smilies picker",stateSelector:"img[data-smilie]"};u.onclick=h=="slider"?n.proxy(this,"initOvl"):h!="belowbox"||this.isOldXen?a:function(n){s.isFullscreen()?a():s.initBox(this,n,i)},i.addButton(e,y),i.addButton(f,u),o=n.extend({},y,{text:"Smilies",tooltip:!1,type:"menuitem",context:"insert",autohide:!1,panel:!1,align:"center",onclick:function(t){var i=this;n.extend(i,{mirrorClick:u.onclick}),i.mirrorClick(t),i.hideMenu().parent().hide()}}),p&&(o.menu=[{type:"container",html:l(),classes:"quattro-menu-smilies",onclick:function(n){n.preventDefault(),n.dontHide=!0;v.onclick(n);n.stopPropagation()}}]),i.addMenuItem(e,o),i.addMenuItem(f,n.extend({},u,{text:"Smilies picker",context:"insert",tooltip:!1}))},initOvl:function(){var t=this.getParam("overlaySmiliesSize");config={width:parseInt(t.w),height:parseInt(t.h)},callbacks={src:this,onafterload:"onafterload"},this.loadOverlay("smilies_slider",config,callbacks)},onafterload:function(n,t,i,r){xenMCE.Templates.SmiliesSlider.init(n,t,i,r)},initBox:function(t,i,r){var f=this,e=n(r.getContainer()).parent(),u=e.find(".redactor_smilies");if(u.length){u.slideToggle("slow",function(){t.active(u.is(":visible"))});return}f.smiliesPending||(f.smiliesPending=!0,XenForo.ajax("index.php?editor/smilies",{mce:"mce4"},function(t){XenForo.hasResponseError(t)||t.templateHtml&&new XenForo.ExtLoader(t,function(){u=n('<div class="redactor_smilies mce" />').html(t.templateHtml),u.hide();u.on("click",".Smilie",function(t){t.preventDefault();var i=n(this),u=n.trim(i.html());r.execCommand("mceInsertContent",!1,u),r.focus()});e.append(u),u.xfActivate(),u.slideToggle()})}).complete(function(){f.smiliesPending=!1,t.active(!0)}))}}),tinymce.create(u+".XenNonBreaking",{XenNonBreaking:function(t,i){var r="xen_nonbreaking",u="XenNonBreaking",f;if(i.addCommand(u,function(){i.insertContent(i.plugins.visualchars&&i.plugins.visualchars.state?'<span data-mce-bogus="1" class="mce-nbsp">&nbsp;</span>':"&nbsp;")}),f={name:r,cmd:u},i.addButton(r,f),i.addMenuItem(r,n.extend({},f,{text:"Non-breaking space",context:"insert",tooltip:!1})),i.getParam("nonbreaking_force_tab"))i.on("keydown",function(n){if(n.keyCode==9){n.preventDefault();for(var t=0;t<4;)i.execCommand(u),t++}})}}),tinymce.create(u+".XenDraft",{XenDraft:function(t,i){var o,s;if(t.isOldXen)return!1;n.extend(this,{ed:i,draftText:t.getPhrase("draft"),$textarea:t.$textarea,autoSaveUrl:t.$textarea.data("auto-save-url")});var r=this,h={},e="Draft mode: ",u="restoredraft",f;if(!this.autoSaveUrl||!t.getParam("xendraft")){console.info(e+"Mce");return}console.info(e+"Xen"),o=t.buildMenuItems(r.draftText.save+"|"+r.draftText._delete,"saveDraft|deleteDraft",null,"xen_draft"),s=function(n){r.saveDraft(!0,n.control.settings.value=="deleteDraft")};i.on("BeforeRenderUI",function(){if(!t.isActiveButton(u))return!1});f={name:u,title:r.draftText.save,type:"menubutton",menu:o,onselect:s},i.addButton(u,f),i.addMenuItem(u,n.extend({},f,{separator:"before",text:r.draftText.save,tooltip:!1,type:!1}));i.on("init",function(){r.pathEl=t.getPathEl(!0),r.initAutoSave()});i.addCommand("xenDraftSave",function(){r.saveDraft(!0)}),i.addCommand("xenDraftDelete",function(){r.saveDraft(!0,!0)})},initAutoSave:function(){var t=this,r=n(this.ed.getContainer()).parents("form"),u=t.$textarea.data("options"),f=this.ed.getContent(),i;r.length&&(this.lastAutoSaveContent=f,i=setInterval(function(){if(!t.$textarea.data("mce4")){clearInterval(i);return}t.saveDraft()},(u.autoSaveFrequency||60)*1e3))},saveDraft:function(t,i){var r=this,e=n(this.ed.getContainer()).parents("form"),s=this.ed.windowManager,o={content:this.ed.getContent()},f="",u;return(this.ed.fire("SavingXenDraft",o),f=o.content,!i&&!t&&f==this.lastAutoSaveContent)?!1:(this.lastAutoSaveContent=f,u=n.Event("BbCodeWysiwygEditorAutoSave"),u.editor=this,u.content=f,u.deleteDraft=i,e.trigger(u),u.isDefaultPrevented())?!1:this.autoSaveRunning?!1:(this.autoSaveRunning=!0,XenForo.ajax(this.autoSaveUrl,e.serialize()+(i?"&delete_draft=1":""),function(u){var o=n.Event("BbCodeWysiwygEditorAutoSaveComplete"),f;if(o.ajaxData=u,e.trigger(o),!o.isDefaultPrevented()){if(u.draftSaved?f=r.draftText.saved:u.draftDeleted&&(f=r.draftText.deleted),!f)return;if(t||i){s.alert(f);return}if(r.pathEl==!1){console.log(r.draftText.saved);return}$path=r.pathEl,n('<div class="draftNotice"><span>'+f+"</span></div>").insertAfter($path).css({display:"inline-block",padding:"8px"}).finish().hide().fadeIn().delay(2e3).fadeOut()}},{global:!1}).complete(function(){r.autoSaveRunning=!1}),!0)}}),tinymce.create(u+".XenSpoiler",{XenSpoiler:function(t,i){var r="xen_spoiler",f="Insert spoiler",u,e;e=function(){i.windowManager.open({title:f,body:[{name:"title",type:"textbox",size:40,label:"Spoiler Title"}],onSubmit:function(n){var r=n.data.title,u=i.selection.getContent();t.insertBbCode("spoiler",r,u)}})},u={name:r,icon:r,iconset:"xenforo",tooltip:f,onclick:e},i.addButton(r,u),i.addMenuItem(r,n.extend({},u,{text:"Spoiler",tooltip:!1,context:"insert"}))}}),tinymce.create(u+".XenToggleMenu",{XenToggleMenu:function(n,t){var h=this,u="togglemenu",e="Show full editor",f;t.on("init",function(){if(n.getParam("tglMenuCollasped")==!0&&t.getParam("menubar")){var u=n.getToolbars();u.hide(),i()}});var i=function(){var t=n.getMenubar(),i=n.getToolbars();i.visible()?t.css("borderWidth","0 0 1px"):t.css("borderWidth",0)},o=function(){var u=this,r=n.getToolbars();r.visible()?r.hide():r.show(),u.active(r.visible()),i()},s=function(t){var u=n.getToolbars();t||t===r?u.show():u.hide(),i()};f={name:u,selectable:!0,onClick:o,text:e,context:"view",onPostRender:function(){function r(){var t=n.getToolbars();i.disabled(t.length==0),i.active(t.visible())}var i=this;r();i.parent().on("show",function(){n.isFullscreen()?i.disabled(!0):r()})}},t.addMenuItem(u,f),t.addCommand("xenFullEditor",s);t.on("FullscreenStateChanged",function(){t.execCommand("xenFullEditor",!0)})}}),tinymce.create(u+".XenIcons",{XenIcons:function(t,i){function e(n){i.buttons[n].type!==r&&(i.buttons[n].type="button")}var u=tinymce.each,f="xenforo";i.on("BeforeRenderUI",function(){var f=function(n){i.menuItems[n]!==r&&delete i.menuItems[n]},e;t.isActiveButton("xen_link")||f("xen_link"),t.isActiveButton("table")||(e=["inserttable","xen_tableskin","cell","row","column","deletetable"],u(e,function(n){f(n)}))});u(i.buttons,function(n,u){var e=u+"_desc",f;XenForo.isTouchBrowser()?i.buttons[u].tooltip!==r&&delete i.buttons[u].tooltip:(f=t.getPhrase(e),f.length&&(i.buttons[u].tooltip=f))}),t.getParam("extraLists")!=!0&&(e("bullist"),e("numlist"));i.on("init",function(){var h=t.getButtonsByProperty("iconset",f,!0),s,o;t.addIconClass(h,f),s=i.theme.panel.find("menubar menubutton"),u(s,function(i){i.on("show",function(e){var s=e.control.find("menuitem"),o;u(s,function(i){i.settings!=r&&i.settings.iconset==f&&t.addIconClass(n(i.getEl()),f)}),o=e.control.parent(),o!==r&&o.type=="menubutton"&&t.fixBtnFullscreen(i,!1,e.control)})}),o=i.theme.panel.find("#statusbar"),o&&o.length>0&&($statBar=n(o[0].getEl())),t.getParam("hidePath")&&o.length>0&&$statBar.find(".mce-path").css("visibility","hidden")})}})})(jQuery,this,document);