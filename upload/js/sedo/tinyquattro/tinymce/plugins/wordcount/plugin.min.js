tinymce.PluginManager.add("wordcount",function(n){function u(){n.theme.panel.find("#wordcount").text(["Words: {0}",t.getCount()])}var t=this,i,r;i=n.getParam("wordcount_countregex",/[\w\u2019\x27\-\u00C0-\u1FFF]+/g),r=n.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g);n.on("init",function(){var i=n.theme.panel&&n.theme.panel.find("#statusbar")[0];i&&tinymce.util.Delay.setEditorTimeout(n,function(){i.insert({type:"label",name:"wordcount",text:["Words: {0}",t.getCount()],classes:"wordcount",disabled:n.settings.readonly},0);n.on("setcontent beforeaddundo",u);n.on("keyup",function(n){n.keyCode==32&&u()})},0)});t.getCount=function(){var t=n.getContent({format:"raw"}),e=0,f;if(t){t=t.replace(/\.\.\./g," ");function u(n,t,i){return t||i||n=="</p>"?" ":""}t=t.replace(/(\s)?<.[^<>]*?>(\s)?/g,u).replace(/(\s)?&nbsp;(\s)?/gi,u).replace(/(\s)?&#160;(\s)?/gi,u),t=t.replace(/(\w+)(&#?[a-z0-9]+;)+(\w+)/i,"$1$3").replace(/&.+?;/g," "),t=t.replace(r,""),f=t.match(i),f&&(e=f.length)}return e}});