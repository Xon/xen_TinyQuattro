(function(b,g){var d={};function c(m,n){var l,j=[];for(var k=0;k<m.length;++k){l=d[m[k]]||e(m[k]);if(!l){throw"module definition dependecy not found: "+m[k]}j.push(l)}n.apply(null,j)}function h(k,j,i){if(typeof k!=="string"){throw"invalid module definition, module id must be defined and be a string"}if(j===g){throw"invalid module definition, dependencies must be specified"}if(i===g){throw"invalid module definition, definition function must be specified"}c(j,function(){d[k]=i.apply(null,arguments)})}function f(i){return !!d[i]}function e(l){var j=b;var i=l.split(/[.\/]/);for(var k=0;k<i.length;++k){if(!j[i[k]]){return}j=j[i[k]]}return j}function a(l){for(var k=0;k<l.length;k++){var m=b;var o=l[k];var j=o.split(/[.\/]/);for(var n=0;n<j.length-1;++n){if(m[j[n]]===g){m[j[n]]={}}m=m[j[n]]}m[j[j.length-1]]=d[o]}}h("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/util/Tools","tinymce/util/VK"],function(i,j,l){function k(){return !i.gecko&&(("ClipboardEvent" in window)||(i.webkit&&"FocusEvent" in window))}return function(t){var x=this,m;function p(){return new Date().getTime()}function q(y){return(l.metaKeyPressed(y)&&y.keyCode==86)||(y.shiftKey&&y.keyCode==45)}function v(y){return y.innerText||y.textContent}function n(){return p()-m<100||x.pasteFormat=="text"}function o(z,y){j.each(y,function(A){if(A.constructor==RegExp){z=z.replace(A,"")}else{z=z.replace(A[0],A[1])}});return z}function w(z){var y=t.fire("PastePreProcess",{content:z});z=y.content;if(!t.settings.paste_data_images){z=z.replace(/<img src=\"data:image[^>]+>/g,"")}if(t.settings.paste_remove_styles||(t.settings.paste_remove_styles_if_webkit!==false&&i.webkit)){z=z.replace(/ style=\"[^\"]+\"/g,"")}if(!y.isDefaultPrevented()){t.insertContent(z)}}function r(A){A=t.dom.encode(A).replace(/\r\n/g,"\n");var z=t.dom.getParent(t.selection.getStart(),t.dom.isBlock);if((z&&/^(PRE|DIV)$/.test(z.nodeName))||!t.settings.forced_root_block){A=o(A,[[/\n/g,"<br>"]])}else{A=o(A,[[/\n\n/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"],[/\n/g,"<br />"]])}var y=t.fire("PastePreProcess",{content:A});if(!y.isDefaultPrevented()){t.insertContent(y.content)}}function s(){var y=t.dom.getViewPort().y;var z=t.dom.add(t.getBody(),"div",{contentEditable:false,"data-mce-bogus":"1",style:"position: absolute; top: "+y+"px; left: 0; width: 1px; height: 1px; overflow: hidden"},'<div contentEditable="true" data-mce-bogus="1">X</div>');t.dom.bind(z,"beforedeactivate focusin focusout",function(A){A.stopPropagation()});return z}function u(y){t.dom.unbind(y);t.dom.remove(y)}t.on("keydown",function(y){if(l.metaKeyPressed(y)&&y.shiftKey&&y.keyCode==86){m=p()}});if(k()){t.on("paste",function(z){var A=z.clipboardData;function y(D,C){for(var B=0;B<A.types.length;B++){if(A.types[B]==D){C(A.getData(D));return true}}}if(A){z.preventDefault();if(n()){if(!y("text/plain",r)){y("text/html",w)}}else{if(!y("text/html",w)){y("text/plain",r)}}}})}else{if(i.ie){t.on("init",function(){var z=t.dom,y=0;t.on("keydown",function(A){if(q(A)&&!A.isDefaultPrevented()){var C=s();y=p();z.bind(C,"paste",function(){setTimeout(function(){u(C);t.selection.setRng(B);if(n()){r(v(C.firstChild))}else{w(C.firstChild.innerHTML)}},0)});var B=t.selection.getRng();C.firstChild.focus();C.firstChild.innerText=""}});t.dom.bind(t.getBody(),"paste",function(C){if(p()-y>100){var B,E=s();C.preventDefault();z.bind(E,"paste",function(F){F.stopPropagation();B=true});var D=t.selection.getRng();var A=z.doc.body.createTextRange();A.moveToElementText(E.firstChild);A.execCommand("Paste");u(E);if(!B){t.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.");return}t.selection.setRng(D);if(n()){r(v(E.firstChild))}else{w(E.firstChild.innerHTML)}}})})}else{t.on("init",function(){t.dom.bind(t.getBody(),"paste",function(y){y.preventDefault();t.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")})});t.on("keydown",function(y){if(q(y)&&!y.isDefaultPrevented()){var A=s();var z=t.selection.getRng();t.selection.select(A,true);t.dom.bind(A,"paste",function(B){B.stopPropagation();setTimeout(function(){u(A);t.lastRng=z;t.selection.setRng(z);var C=A.firstChild;if(C.lastChild&&C.lastChild.nodeName=="BR"){C.removeChild(C.lastChild)}if(n()){r(v(C))}else{w(C.innerHTML)}},0)})}})}if(!t.settings.paste_data_images){t.on("drop",function(z){var y=z.dataTransfer;if(y&&y.files&&y.files.length>0){z.preventDefault()}})}}if(t.paste_block_drop){t.on("dragend dragover draggesture dragdrop drop drag",function(y){y.preventDefault();y.stopPropagation()})}this.paste=w;this.pasteText=r}});h("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node"],function(k,m,l,i,j){return function(n){var o=k.each;n.on("PastePreProcess",function(v){var x=v.content,w,s;w=n.settings.paste_retain_style_properties;if(w){s=k.makeMap(w)}function q(z){o(z,function(A){if(A.constructor==RegExp){x=x.replace(A,"")}else{x=x.replace(A[0],A[1])}})}function u(D){var C,I,z=1;function J(M,L,N,P){var O=M._listLevel||z;if(O!=z){if(O<z){if(C){C=C.parent.parent}}else{I=C;C=null}}if(!C||C.name!=N){I=I||C;C=new j(N,1);if(P>1){C.attr("start",""+P)}M.wrap(C)}else{C.append(M)}M.name="li";L.value="";var K=L.next;if(K&&K.type==3){K.value=K.value.replace(/^\u00a0+/,"")}if(O>z){I.lastChild.append(C)}z=O}var H=D.getAll("p");for(var E=0;E<H.length;E++){D=H[E];if(D.name=="p"&&D.firstChild){var G="";var A=D.firstChild;while(A){G=A.value;if(G){break}A=A.firstChild}if(/^\s*[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*$/.test(G)){J(D,A,"ul");continue}if(/^\s*\w+\./.test(G)){var F=/([0-9])\./.exec(G);var B=1;if(F){B=parseInt(F[1],10)}J(D,A,"ol",B);continue}C=null}}}function p(A,z){if(A.name==="p"){var B=/mso-list:\w+ \w+([0-9]+)/.exec(z);if(B){A._listLevel=parseInt(B[1],10)}}if(n.getParam("paste_retain_style_properties","none")){var C="";k.each(n.dom.parseStyle(z),function(E,D){switch(D){case"horiz-align":D="text-align";return;case"vert-align":D="vertical-align";return;case"font-color":case"mso-foreground":D="color";return;case"mso-background":case"mso-highlight":D="background";break}if(w=="all"||(s&&s[D])){C+=D+":"+E+";"}});if(C){return C}}return null}if(n.settings.paste_enable_default_filters===false){return}if(/class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(v.content)){v.wordContent=true;q([/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\u00a0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(A,z){return(z.length>0)?z.replace(/./," ").slice(Math.floor(z.length/2)).split("").join("\u00a0"):""}]]);var t=new l({valid_elements:"@[style],-strong/b,-em/i,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-table,-tr,-td[colspan|rowspan],-th,-thead,-tfoot,-tbody,-a[!href]"});var y=new m({},t);y.addAttributeFilter("style",function(z){var A=z.length,B;while(A--){B=z[A];B.attr("style",p(B,B.attr("style")));if(B.name=="span"&&!B.attributes.length){B.unwrap()}}});var r=y.parse(x);u(r);v.content=new i({},t).serialize(r)}})}});h("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools"],function(i,j){return function(l){var o;function n(q){l.on("PastePreProcess",function(r){r.content=q(r.content)})}function p(r,q){j.each(q,function(s){if(s.constructor==RegExp){r=r.replace(s,"")}else{r=r.replace(s[0],s[1])}});return r}function m(q){q=p(q,[/^[\s\S]*<!--StartFragment-->|<!--EndFragment-->[\s\S]*$/g,[/<span class="Apple-converted-space">\u00a0<\/span>/g,"\u00a0"],/<br>$/]);return q}function k(q){if(!o){var r=[];j.each(l.schema.getBlockElements(),function(t,s){r.push(s)});o=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+r.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g")}q=p(q,[[o,"$1"]]);q=p(q,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]);return q}if(i.webkit){n(m)}if(i.ie){n(k)}}});h("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],function(i,m,l,j){var k;i.add("paste",function(o){var n=this,p;n.clipboard=p=new m(o);n.quirks=new j(o);n.wordFilter=new l(o);if(o.settings.paste_as_text){n.clipboard.pasteFormat="text"}o.addCommand("mceInsertClipboardContent",function(r,q){if(q.content){n.clipboard.paste(q.content)}if(q.text){n.clipboard.pasteText(q.text)}});o.addMenuItem("pastetext",{text:"Paste as text",selectable:true,active:p.pasteFormat,onclick:function(){if(p.pasteFormat=="text"){this.active(false);p.pasteFormat="html"}else{p.pasteFormat="text";this.active(true);if(!k){o.windowManager.alert("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");k=true}}}});o.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",selectable:true,active:p.pasteFormat,onclick:function(){if(p.pasteFormat=="text"){this.active(false);p.pasteFormat="html"}else{p.pasteFormat="text";this.active(true);if(!k){o.windowManager.alert("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");k=true}}}})})});a(["tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks","tinymce/pasteplugin/Plugin"])})(this);