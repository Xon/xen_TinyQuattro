(function(b,g){var d={};function c(m,n){var l,j=[];for(var k=0;k<m.length;++k){l=d[m[k]]||e(m[k]);if(!l){throw"module definition dependecy not found: "+m[k]}j.push(l)}n.apply(null,j)}function h(k,j,i){if(typeof k!=="string"){throw"invalid module definition, module id must be defined and be a string"}if(j===g){throw"invalid module definition, dependencies must be specified"}if(i===g){throw"invalid module definition, definition function must be specified"}c(j,function(){d[k]=i.apply(null,arguments)})}function f(i){return !!d[i]}function e(l){var j=b;var i=l.split(/[.\/]/);for(var k=0;k<i.length;++k){if(!j[i[k]]){return}j=j[i[k]]}return j}function a(l){for(var k=0;k<l.length;k++){var m=b;var o=l[k];var j=o.split(/[.\/]/);for(var n=0;n<j.length-1;++n){if(m[j[n]]===g){m[j[n]]={}}m=m[j[n]]}m[j[j.length-1]]=d[o]}}h("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/util/Tools","tinymce/util/VK"],function(i,j,l){function k(){return !i.gecko&&(("ClipboardEvent" in window)||(i.webkit&&"FocusEvent" in window))}return function(u){var y=this,n;function q(){return new Date().getTime()}function r(z){return(l.metaKeyPressed(z)&&z.keyCode==86)||(z.shiftKey&&z.keyCode==45)}function w(z){return z.innerText||z.textContent}function o(){return q()-n<100||y.pasteFormat=="text"}function p(A,z){j.each(z,function(B){if(B.constructor==RegExp){A=A.replace(B,"")}else{A=A.replace(B[0],B[1])}});return A}function x(A){var z=u.fire("PastePreProcess",{content:A});A=z.content;if(!u.settings.paste_data_images){A=A.replace(/<img src=\"data:image[^>]+>/g,"")}if(u.settings.paste_remove_styles||(u.settings.paste_remove_styles_if_webkit!==false&&i.webkit)){A=A.replace(/ style=\"[^\"]+\"/g,"")}if(!z.isDefaultPrevented()){u.insertContent(A)}}function s(B){B=u.dom.encode(B).replace(/\r\n/g,"\n");var A=u.dom.getParent(u.selection.getStart(),u.dom.isBlock);if((A&&/^(PRE|DIV)$/.test(A.nodeName))||!u.settings.forced_root_block){B=p(B,[[/\n/g,"<br>"]])}else{B=p(B,[[/\n\n/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"],[/\n/g,"<br />"]])}var z=u.fire("PastePreProcess",{content:B});if(!z.isDefaultPrevented()){u.insertContent(z.content)}}function t(){var z=u.dom.getViewPort().y;var A=u.dom.add(u.getBody(),"div",{contentEditable:false,"data-mce-bogus":"1",style:"position: absolute; top: "+z+"px; left: 0; width: 1px; height: 1px; overflow: hidden"},'<div contentEditable="true" data-mce-bogus="1">X</div>');u.dom.bind(A,"beforedeactivate focusin focusout",function(B){B.stopPropagation()});return A}function v(z){u.dom.unbind(z);u.dom.remove(z)}u.on("keydown",function(z){if(l.metaKeyPressed(z)&&z.shiftKey&&z.keyCode==86){n=q()}});if(k()){u.on("paste",function(A){var B=A.clipboardData;function z(E,D){for(var C=0;C<B.types.length;C++){if(B.types[C]==E){D(B.getData(E));return true}}}if(B){A.preventDefault();if(o()){if(!z("text/plain",s)){z("text/html",x)}}else{if(!z("text/html",x)){z("text/plain",s)}}}})}else{if(i.ie){var m=0;u.on("keydown",function(z){if(r(z)&&!z.isDefaultPrevented()){z.stopImmediatePropagation();var B=t();m=q();u.dom.bind(B,"paste",function(){setTimeout(function(){u.selection.setRng(A);v(B);if(o()){s(w(B.firstChild))}else{x(B.firstChild.innerHTML)}},0)});var A=u.selection.getRng();B.firstChild.focus();B.firstChild.innerText=""}});u.on("init",function(){var z=u.dom;u.dom.bind(u.getBody(),"paste",function(C){if(q()-m>100){var B,E=t();C.preventDefault();z.bind(E,"paste",function(F){F.stopPropagation();B=true});var D=u.selection.getRng();var A=z.doc.body.createTextRange();A.moveToElementText(E.firstChild);A.execCommand("Paste");v(E);if(!B){u.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.");return}u.selection.setRng(D);if(o()){s(w(E.firstChild))}else{x(E.firstChild.innerHTML)}}})})}else{u.on("init",function(){u.dom.bind(u.getBody(),"paste",function(A){var z=u.getDoc();if(o()&&(A.clipboardData||z.dataTransfer)){A.preventDefault();s((A.clipboardData||z.dataTransfer).getData("Text"));return}if(!i.iOS){A.preventDefault();u.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")}})});u.on("keydown",function(z){if(r(z)&&!z.isDefaultPrevented()){z.stopImmediatePropagation();var B=t();var A=u.selection.getRng();u.selection.select(B,true);u.dom.bind(B,"paste",function(C){C.stopPropagation();setTimeout(function(){v(B);u.lastRng=A;u.selection.setRng(A);var D=B.firstChild;if(D.lastChild&&D.lastChild.nodeName=="BR"){D.removeChild(D.lastChild)}if(o()){s(w(D))}else{x(D.innerHTML)}},0)})}})}if(!u.settings.paste_data_images){u.on("drop",function(A){var z=A.dataTransfer;if(z&&z.files&&z.files.length>0){A.preventDefault()}})}}if(u.paste_block_drop){u.on("dragend dragover draggesture dragdrop drop drag",function(z){z.preventDefault();z.stopPropagation()})}this.paste=x;this.pasteText=s}});h("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node"],function(k,m,l,i,j){return function(n){var o=k.each;n.on("PastePreProcess",function(v){var x=v.content,w,s;w=n.settings.paste_retain_style_properties;if(w){s=k.makeMap(w)}function q(z){o(z,function(A){if(A.constructor==RegExp){x=x.replace(A,"")}else{x=x.replace(A[0],A[1])}})}function u(D){var C,I,z=1;function J(M,L,N,P){var O=M._listLevel||z;if(O!=z){if(O<z){if(C){C=C.parent.parent}}else{I=C;C=null}}if(!C||C.name!=N){I=I||C;C=new j(N,1);if(P>1){C.attr("start",""+P)}M.wrap(C)}else{C.append(M)}M.name="li";L.value="";var K=L.next;if(K&&K.type==3){K.value=K.value.replace(/^\u00a0+/,"")}if(O>z&&I){I.lastChild.append(C)}z=O}var H=D.getAll("p");for(var E=0;E<H.length;E++){D=H[E];if(D.name=="p"&&D.firstChild){var G="";var A=D.firstChild;while(A){G=A.value;if(G){break}A=A.firstChild}if(/^\s*[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*$/.test(G)){J(D,A,"ul");continue}if(/^\s*\w+\./.test(G)){var F=/([0-9])\./.exec(G);var B=1;if(F){B=parseInt(F[1],10)}J(D,A,"ol",B);continue}C=null}}}function p(A,z){if(A.name==="p"){var B=/mso-list:\w+ \w+([0-9]+)/.exec(z);if(B){A._listLevel=parseInt(B[1],10)}}if(n.getParam("paste_retain_style_properties","none")){var C="";k.each(n.dom.parseStyle(z),function(E,D){switch(D){case"horiz-align":D="text-align";return;case"vert-align":D="vertical-align";return;case"font-color":case"mso-foreground":D="color";return;case"mso-background":case"mso-highlight":D="background";break}if(w=="all"||(s&&s[D])){C+=D+":"+E+";"}});if(C){return C}}return null}if(n.settings.paste_enable_default_filters===false){return}if(/class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(v.content)){v.wordContent=true;q([/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\u00a0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(A,z){return(z.length>0)?z.replace(/./," ").slice(Math.floor(z.length/2)).split("").join("\u00a0"):""}]]);var t=new l({valid_elements:"@[style],-strong/b,-em/i,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-table,-tr,-td[colspan|rowspan],-th,-thead,-tfoot,-tbody,-a[!href],sub,sup,strike"});var y=new m({},t);y.addAttributeFilter("style",function(z){var A=z.length,B;while(A--){B=z[A];B.attr("style",p(B,B.attr("style")));if(B.name=="span"&&!B.attributes.length){B.unwrap()}}});var r=y.parse(x);u(r);v.content=new i({},t).serialize(r)}})}});h("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools"],function(i,j){return function(l){var o;function n(q){l.on("PastePreProcess",function(r){r.content=q(r.content)})}function p(r,q){j.each(q,function(s){if(s.constructor==RegExp){r=r.replace(s,"")}else{r=r.replace(s[0],s[1])}});return r}function m(q){q=p(q,[/^[\s\S]*<!--StartFragment-->|<!--EndFragment-->[\s\S]*$/g,[/<span class="Apple-converted-space">\u00a0<\/span>/g,"\u00a0"],/<br>$/]);return q}function k(q){if(!o){var r=[];j.each(l.schema.getBlockElements(),function(t,s){r.push(s)});o=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+r.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g")}q=p(q,[[o,"$1"]]);q=p(q,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]);return q}if(i.webkit){n(m)}if(i.ie){n(k)}}});h("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],function(i,m,l,j){var k;i.add("paste",function(p){var o=this,q;function n(){if(q.pasteFormat=="text"){this.active(false);q.pasteFormat="html"}else{q.pasteFormat="text";this.active(true);if(!k){p.windowManager.alert("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");k=true}}}o.clipboard=q=new m(p);o.quirks=new j(p);o.wordFilter=new l(p);if(p.settings.paste_as_text){o.clipboard.pasteFormat="text"}p.addCommand("mceInsertClipboardContent",function(s,r){if(r.content){o.clipboard.paste(r.content)}if(r.text){o.clipboard.pasteText(r.text)}});p.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:n,active:o.clipboard.pasteFormat=="text"});p.addMenuItem("pastetext",{text:"Paste as text",selectable:true,active:q.pasteFormat,onclick:n})})});a(["tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks","tinymce/pasteplugin/Plugin"])})(this);