!function(n,t,i,r){typeof xenMCE===r&&(xenMCE={}),xenMCE.BbCodeWysiwygEditor=function(n){var t=this;setTimeout(function(){t.__construct(n)},0)},n(function(){t.tinymce&&n("textarea.BbCodeWysiwygEditor").length!=0||(xenMCE.lazyLoad=1)}),xenMCE.BbCodeWysiwygEditor.prototype={__construct:function(i){var s,h;i.show().after(n('<input type="hidden" name="_xfRteFailed" value="1" />'));var p=function(n){return n.toString().replace(","," ").split(" ")},o=i.attr("id"),c=xenMCE.Params,u=xenMCE.defaultConfig,y=i.data("auto-save-url"),e=c.xenwordcount,v=c.xendraft,a=XenForo._baseUrl,f,l=p(u.plugins);n.inArray("code",l!==1)&&(u.toolbar1+=" | code"),i.each(function(){var f=n(this).closest("form");if(f.attr("id")=="QuickReply"){var r="autoresize_min_height",t="autoresize_max_height",i="_qr";u[r]=u[r+i],u[t]=u[t+i]}}),e!="no"&&(u.plugins.push("wordcount"),e=="char"?(u.wordcount_countregex=/\S/g,u.wordcount_cleanregex=""):e=="charwp"&&(u.wordcount_countregex=/(\S|\b[\u0020]\b)/g,u.wordcount_cleanregex=/\n/g)),v&&y||u.plugins.push("autosave"),xenMCE.lazyLoad?(u.script_url=a+"js/sedo/tinyquattro/tinymce/tinymce.min.js",console.info("MCE Lazyloader - Url: ",u.script_url),typeof tinymce!==r&&xenMCE.lazyLoad==1&&delete t.tinymce,xenMCE.lazyLoad++,f="jquery"):(f="mce",u.selector="#"+o),typeof xenMCE.onSetup===r&&(xenMCE.onSetup=[]),s=function(t){t.on("init",function(){$textarea=n(t.getElement()).data("editorActivated",!0).addClass("mceQuattro").hide(),$textarea.siblings('input[name="_xfRteFailed"]').remove(),t.show()})},xenMCE.onSetup.push(s),u.setup=function(t){n.each(xenMCE.onSetup,function(){this(t)})},f=="jquery"?i.tinymce(u):(h=new tinymce.Editor(o,u,tinymce.EditorManager),h.render()),console.info("XenForo editor %s, %o",o,i)}},XenForo.register("textarea.BbCodeWysiwygEditor","xenMCE.BbCodeWysiwygEditor")}(jQuery,this,document,"undefined");