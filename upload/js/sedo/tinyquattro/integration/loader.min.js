!function(n,t,i,r){typeof xenMCE===r&&(xenMCE={}),xenMCE.BbCodeWysiwygEditor=function(n){var t=this;setTimeout(function(){t.__construct(n)},0)},n(function(){t.tinymce&&n("textarea.BbCodeWysiwygEditor").length!=0||(xenMCE.lazyLoad=1)}),xenMCE.BbCodeWysiwygEditor.prototype={__construct:function(i){var e=i.data("quattro"),o=i.data("redactor"),s=i.attr("id"),c,a,v;if(!e)return!1;o&&(c=i.val(),n.extend(o,{$editor:i}),o.destroy(),i.val(c)),i.show().after(n('<input type="hidden" name="_xfRteFailed" value="1" />'));var f=e.params,u=e.settings,l=f.mceRegexEl,y=i.data("auto-save-url"),p=f.xendraft,w=f.lazyLoader,b=XenForo.baseUrl(),h;u.xenParams=f,l!=r&&n.each(l,function(t,i){u[i]!==r&&n.isArray(u[i])&&(u[i]=new RegExp(u[i][0],u[i][1]))}),i.each(function(){var f=n(this),e=f.closest("form");if(e.attr("id")=="QuickReply"){var t="autoresize_min_height",i="autoresize_max_height",r="_qr";u[t]=u[t+r],u[i]=u[i+r]}}),p&&y||u.plugins.push("autosave"),xenMCE.lazyLoad?w||typeof t.tinyMCEPreInit=="undefined"?(u.script_url=b+"js/sedo/tinyquattro/tinymce/tinymce.min.js",console.info("MCE Lazyloader - Url: ",u.script_url),typeof tinymce!==r&&xenMCE.lazyLoad==1&&delete t.tinymce,xenMCE.lazyLoad++,h="jquery"):console.info("MCE Preinit Mode",t.tinyMCEPreInit):(h="mce",u.selector="#"+s),typeof xenMCE.onSetup===r&&(xenMCE.onSetup=[]),a=function(t){t.on("init",function(){$textarea=n(t.getElement()).data("editorActivated",!0).addClass("mceQuattro").hide(),$textarea.siblings('input[name="_xfRteFailed"]').remove(),t.show()})},xenMCE.onSetup.push(a),u.setup=function(t){n.each(xenMCE.onSetup,function(){this(t)})},h=="jquery"?i.tinymce(u):(v=new tinymce.Editor(s,u,tinymce.EditorManager),v.render()),console.info("XenForo editor %s, %o",s,i)}},XenForo.register("textarea.BbCodeWysiwygEditor","xenMCE.BbCodeWysiwygEditor")}(jQuery,this,document,"undefined");