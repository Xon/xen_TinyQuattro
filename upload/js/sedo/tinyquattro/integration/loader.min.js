!function(n,t,i,r){typeof xenMCE===r&&(xenMCE={}),xenMCE.BbCodeWysiwygEditor=function(n){var t=this;setTimeout(function(){t.__construct(n)},0)},n(function(){t.tinymce&&n("textarea.BbCodeWysiwygEditor").length!=0||(xenMCE.lazyLoad=1)}),xenMCE.BbCodeWysiwygEditor.prototype={__construct:function(i){var h,s;i.show().after(n('<input type="hidden" name="_xfRteFailed" value="1" />'));var o=i.attr("id"),l=i.data("quattro"),e=l.params,u=l.settings,c=e.mceRegexEl,y=i.data("auto-save-url"),a=e.xendraft,v=XenForo._baseUrl,f;u.xenParams=e,c!=r&&n.each(c,function(t,i){u[i]!==r&&n.isArray(u[i])&&(u[i]=new RegExp(u[i][0],u[i][1]))}),i.each(function(){var f=n(this).closest("form");if(f.attr("id")=="QuickReply"){var r="autoresize_min_height",t="autoresize_max_height",i="_qr";u[r]=u[r+i],u[t]=u[t+i]}}),a&&y||u.plugins.push("autosave"),xenMCE.lazyLoad?(u.script_url=v+"js/sedo/tinyquattro/tinymce/tinymce.min.js",console.info("MCE Lazyloader - Url: ",u.script_url),typeof tinymce!==r&&xenMCE.lazyLoad==1&&delete t.tinymce,xenMCE.lazyLoad++,f="jquery"):(f="mce",u.selector="#"+o),typeof xenMCE.onSetup===r&&(xenMCE.onSetup=[]),h=function(t){t.on("init",function(){$textarea=n(t.getElement()).data("editorActivated",!0).addClass("mceQuattro").hide(),$textarea.siblings('input[name="_xfRteFailed"]').remove(),t.show()})},xenMCE.onSetup.push(h),u.setup=function(t){n.each(xenMCE.onSetup,function(){this(t)})},f=="jquery"?i.tinymce(u):(s=new tinymce.Editor(o,u,tinymce.EditorManager),s.render()),console.info("XenForo editor %s, %o",o,i)}},XenForo.register("textarea.BbCodeWysiwygEditor","xenMCE.BbCodeWysiwygEditor")}(jQuery,this,document,"undefined");